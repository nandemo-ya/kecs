# Web UI ガイド

KECS には、ECS リソースを管理するための最新の Web ベースユーザーインターフェイスが含まれています。このガイドでは、Web UI を効果的に使用する方法について説明します。

## Web UI へのアクセス

### デフォルトアクセス

Web UI は以下で利用可能です:
```
http://localhost:8080/ui
```

### カスタムポート設定

異なるポートで KECS を実行している場合:
```bash
# カスタムポートで KECS を起動
./bin/kecs server --api-port 9080

# UI にアクセス
http://localhost:9080/ui
```

### 認証

デフォルトでは、開発モードでは Web UI は認証を必要としません。本番環境のデプロイメントについては、[セキュリティ設定](/ja/guides/security)を参照してください。

## ダッシュボード概要

### メインダッシュボード

ダッシュボードは ECS 環境のリアルタイム概要を提供します:

- **クラスターステータス**: アクティブなクラスターとその健全性
- **サービスメトリクス**: すべてのクラスターで実行中のサービス
- **タスク統計**: 合計タスク数、実行中、保留中、停止済み
- **最近のイベント**: 最新のデプロイメントとスケーリングイベント
- **リソース使用率**: CPU とメモリ使用率のグラフ

### ナビゲーション

サイドバーから以下に素早くアクセス:
- **クラスター**: ECS クラスターの管理
- **サービス**: サービスの表示と管理
- **タスク**: 実行中のタスクの監視
- **タスク定義**: タスク定義の参照と作成
- **ロードバランサー**: ロードバランサー統合の管理
- **LocalStack**: LocalStack 統合ステータス

## クラスターの管理

### クラスターの表示

1. サイドバーの **クラスター** をクリック
2. すべてのクラスターのリストを以下の情報と共に表示:
   - クラスター名と ARN
   - ステータス（アクティブ/非アクティブ）
   - サービス数
   - 実行中のタスク数
   - リソース使用率

### クラスターの作成

1. **クラスターを作成** ボタンをクリック
2. クラスターの詳細を入力:
   - **クラスター名**: クラスターの一意の名前
   - **タグ**: オプションのキーと値のペア
   - **設定**: コンテナーインサイト、ログオプション
3. **作成** をクリック

### クラスターの詳細

クラスター名をクリックして表示:
- **概要**: クラスター統計と設定
- **サービス**: このクラスターで実行中のサービス
- **タスク**: クラスター内のすべてのタスク
- **コンテナーインスタンス**: EC2 インスタンス（該当する場合）
- **メトリクス**: CPU、メモリ、ネットワークグラフ
- **イベント**: クラスターイベント履歴

## サービスの管理

### サービスリストビュー

サービスページには以下が表示されます:
- サービス名と ARN
- クラスター割り当て
- タスク定義とリビジョン
- 希望/実行中/保留中の数
- ステータスと健全性
- 最後のデプロイメント情報

### サービスの作成

1. **サービスを作成** をクリック
2. サービス設定を入力:

#### ステップ 1: サービスの設定
- **クラスター**: ターゲットクラスターを選択
- **サービス名**: 一意のサービス識別子
- **タスク定義**: ファミリーとリビジョンを選択
- **サービスタイプ**: レプリカまたはデーモン

#### ステップ 2: ネットワークの設定
- **起動タイプ**: Fargate または EC2
- **タスク数**: 希望数
- **VPC とサブネット**: ネットワーク設定
- **セキュリティグループ**: 選択または作成
- **パブリック IP**: 有効/無効

#### ステップ 3: ロードバランシング（オプション）
- **ロードバランサータイプ**: Application/Network
- **ターゲットグループ**: 既存を選択または新規作成
- **コンテナーとポート**: コンテナーにマップ

#### ステップ 4: サービスディスカバリー（オプション）
- **名前空間**: DNS 名前空間を選択
- **サービスディスカバリー名**: サービスの DNS 名
- **DNS レコードタイプ**: A または SRV
- **TTL**: DNS レコード TTL

#### ステップ 5: オートスケーリング（オプション）
- **最小タスク数**: 下限
- **最大タスク数**: 上限
- **ターゲットメトリクス**: CPU またはメモリ
- **ターゲット値**: しきい値パーセンテージ

### サービスの詳細

サービスをクリックしてアクセス:

#### 概要タブ
- サービス設定
- 現在のデプロイメントステータス
- タスク健全性サマリー
- 最近のイベント

#### タスクタブ
- すべてのタスクのリスト
- タスクステータスと健全性
- 個々のタスクの開始/停止
- タスクログの表示

#### メトリクスタブ
- CPU 使用率グラフ
- メモリ使用率グラフ
- ネットワーク I/O メトリクス
- リクエスト数（ロードバランス済みの場合）

#### デプロイメントタブ
- アクティブなデプロイメント
- デプロイメント履歴
- ロールバックオプション
- サーキットブレーカーステータス

#### イベントタブ
- サービスイベントタイムライン
- スケーリングイベント
- デプロイメントイベント
- エラーイベント

### サービスの更新

1. サービス詳細ページで **更新** をクリック
2. 設定を変更:
   - タスク定義リビジョン
   - 希望数
   - デプロイメントオプション
   - ネットワーク設定
3. 変更を確認
4. **サービスを更新** をクリック

UI はデプロイメントの進行状況をリアルタイムで表示します。

## タスクの管理

### タスクリスト

すべてのタスクを以下と共に表示:
- タスク ID と ARN
- タスク定義
- クラスターとサービス
- ステータス（実行中/保留中/停止済み）
- 開始/停止時刻
- コンテナーインスタンス（EC2）

### タスクフィルター

タスクをフィルター:
- **ステータス**: 実行中、保留中、停止済み
- **サービス**: 特定のサービスに属するタスク
- **タスク定義**: 特定のファミリーまたはリビジョン
- **起動タイプ**: Fargate または EC2

### タスクの詳細

タスクをクリックして表示:

#### 概要
- タスク設定
- ネットワーク詳細（IP アドレス）
- IAM ロール
- リソース割り当て

#### コンテナー
- コンテナーステータス
- 終了コード
- リソース使用状況
- 環境変数

#### ログ
- リアルタイムログストリーミング
- ログのダウンロード
- コンテナーでフィルター
- 検索機能

#### メトリクス
- 時間経過による CPU 使用率
- 時間経過によるメモリ使用率
- ネットワークメトリクス
- ディスク I/O

### タスクの手動実行

1. **タスクを実行** をクリック
2. 選択:
   - クラスター
   - タスク定義
   - 起動タイプ
   - タスク数
3. オーバーライドの設定（オプション）:
   - コンテナーオーバーライド
   - 環境変数
   - リソース制限
4. **実行** をクリック

## タスク定義

### タスク定義の参照

すべてのタスク定義ファミリーを表示:
- ファミリー名
- 最新リビジョン
- ステータス
- 互換性のある起動タイプ
- 作成日

### タスク定義の作成

1. **新しいタスク定義を作成** をクリック
2. 互換性を選択:
   - Fargate
   - EC2
   - External

#### コンテナー設定
- **コンテナー名**: 一意の識別子
- **イメージ**: Docker イメージ URI
- **メモリ制限**: ハードおよびソフト制限
- **ポートマッピング**: コンテナーポート
- **環境変数**: キーと値のペア
- **シークレット**: Secrets Manager または SSM から

#### 高度な設定
- ヘルスチェック
- ログ設定
- ボリューム
- Docker ラベル
- システムコントロール

### タスク定義の詳細

包括的な情報を表示:
- JSON 定義
- コンテナー定義
- ネットワークモード
- IAM ロール
- ボリューム
- リビジョン履歴

## リアルタイム機能

### WebSocket 接続

UI は以下のための WebSocket 接続を維持:
- ライブタスクステータス更新
- サービスデプロイメント進行状況
- クラスターイベント
- メトリクスストリーミング

### 自動更新

データは自動的に更新されます:
- ダッシュボード: 5秒ごと
- サービスリスト: 10秒ごと
- タスクリスト: 10秒ごと
- メトリクス: リアルタイムストリーミング

### 通知

アプリ内通知を受信:
- デプロイメント完了
- タスク失敗
- スケーリングイベント
- エラー状態

## LocalStack 統合

### LocalStack ダッシュボード

LocalStack が有効な場合:
1. サイドバーの **LocalStack** をクリック
2. 統合ステータスを表示:
   - LocalStack の健全性
   - 利用可能なサービス
   - エンドポイント URL
   - 設定

### AWS サービスプロキシ

プロキシされた AWS サービスにアクセス:
- IAM ポリシーとロール
- CloudWatch ログとメトリクス
- S3 バケット
- Secrets Manager
- SSM パラメータストア

## キーボードショートカット

ショートカットで生産性を向上:

- `Ctrl/Cmd + K`: クイック検索
- `G then C`: クラスターへ移動
- `G then S`: サービスへ移動
- `G then T`: タスクへ移動
- `G then D`: タスク定義へ移動
- `R`: 現在のビューを更新
- `?`: キーボードショートカットを表示

## 設定と環境設定

### UI 環境設定

歯車アイコンからアクセス:
- **テーマ**: ライト/ダークモード
- **密度**: 快適/コンパクト
- **更新間隔**: 自動更新のカスタマイズ
- **通知**: タイプの有効/無効

### データエクスポート

複数の形式でデータをエクスポート:
- リスト用の CSV エクスポート
- 設定用の JSON エクスポート
- メトリクス用の PDF レポート

## ヒントとベストプラクティス

### 1. フィルターを効果的に使用

- よく使用するフィルターを保存
- 複数のフィルターを組み合わせる
- 素早いアクセスには検索を使用

### 2. デプロイメントの監視

- 更新中はデプロイメントタブを開いたままにする
- 問題のイベントストリームを監視
- 安全のためにサーキットブレーカーを使用

### 3. キーボードナビゲーションの活用

- 効率化のためにショートカットを学習
- クイック検索を使用（`Ctrl+K`）
- 矢印キーでナビゲート

### 4. ビューのカスタマイズ

- 列の表示を調整
- 関連するメトリクスでソート
- より多くのデータにはコンパクトモードを使用

### 5. アラートの設定

- デプロイメント通知を設定
- 失敗アラートを有効化
- リソースしきい値を監視

## UI の問題のトラブルシューティング

### 接続の問題

UI が API に接続できない場合:
1. KECS が実行中であることを確認
2. ブラウザコンソールでエラーを確認
3. WebSocket 接続が許可されていることを確認
4. ページを更新してみる

### パフォーマンスの問題

UI のパフォーマンスが遅い場合:
1. 自動更新頻度を減らす
2. ページあたりのアイテム数を制限
3. 使用していないブラウザタブを閉じる
4. ブラウザキャッシュをクリア

### 表示の問題

UI 要素が欠落または破損している場合:
1. ブラウザの互換性を確認（Chrome、Firefox、Safari がサポート）
2. ブラウザ拡張機能を無効化
3. ローカルストレージをクリア
4. シークレット/プライベートモードを試す

詳細については、[トラブルシューティングガイド](/ja/guides/troubleshooting)を参照してください。